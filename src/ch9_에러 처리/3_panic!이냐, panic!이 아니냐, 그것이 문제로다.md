panic!이냐, panic!이 아니냐, 그것이 문제로다
=

코드가 패닉을 일으킬 때는 복구할 방법이 없다

- Result 값을 반환하는 선택을 한다면 호출하는 쪽에게 옵션을 제공하는 것

- 호출하는 코드 쪽에서는 복구를 시도하거나 panic!을 호출하여 복구 가능한 에러를 복구 불가능한 것으로 바꿔놓을 수도 있다. 

- 기본적으로 Result를 반환하는 것이 좋은 선택

- 예제, 프로토타입, 테스트 같은 상황에서는 Result를 반환하는 대신 패닉을 일으키는 코드가 더 적절

unwrap 혹은 expect를 호출하는 것이 좋은 경우
-
어떤 개념을 묘사하기 위한 예제를 작성 중이라면, 견고한 에러 처리 코드를 포함시키는 것이 오히려 예제의 명확성을 떨어트릴 수도 있다. 

예제 코드 내에서는 panic!을 일으킬 수 있는 unwrap 같은 메서드의 호출이 애플리케이션의 에러 처리가 필요한 곳을 뜻하는 방식으로 해석될 수 있다. 


비슷한 상황으로 에러를 어떻게 처리할지 결정할 준비가 되기 전이라면, unwrap과 expect 메서드가 프로토타이핑할 좋다. 

(코드를 더 견고하게 만들 준비가 되었을 때를 위해서 명확한 표시를 남겨 둠)

만일 테스트 내에서 메서드 호출이 실패한다면, 해당 메서드가 테스트 중인 기능이 아니더라도 전체 테스트를 실패시키는데 panic!이 테스트의 실패를 표시하는 방식이므로, unwrap이나 expect의 호출이 정확히 그렇게 만들어준다.

Result가 Ok 값을 가지고 있을 거라 확신할만한 논리적 근거가 있지만, 컴파일러가 그 논리를 이해할 수 없는 경우라면, unwrap 혹은 expect를 호출하는 것이 적절하다.

에러 처리를 위한 가이드라인
-
코드가 결국 불변성이 깨질 가능성이 있을 때는 코드에 panic!을 넣는 것이 바람직 함.

하지만 실패가 충분히 예상되는 경우라면 panic!을 호출하는 것보다 Result를 반환하는 것이 여전히 더 적절함.

코드가 유효하지 않은 값에 대해 호출되면 사용자를 위험에 빠뜨릴 수 있는 연산을 수행할 때, 그 코드는 해당 값이 유효한지를 먼저 검사하고, 만일 그렇지 않다면 panic!을 호출함.

정리
-
panic! 매크로는 프로그램이 처리 불가능한 상태에 놓여 있음에 대한 신호를 주고 유효하지 않거나 잘못된 값으로 계속 진행을 시도하는 대신 실행을 멈춤

Result 열거형은 러스트의 타입 시스템을 이용하여 복구할 수 있는 방법으로 코드의 연산이 실패할 수도 있음을 알려줌

Result 열거형은 호출하는 코드에게 잠재적인 성공이나 실패를 처리해야 할 필요가 있음을 알려줌
